---
published: false
---

---
layout: post
title:  使用区块链来解决HTTPS中证书的颁发中心化的问题
date:   2018-05-03 23:32:44 +0800
description:  https协议中证书的颁发是由中心化机构颁发，存在一定的风险。使用区块链来解决是个很好的方法。
categories: blockchain
---

# HTTPS与区块链的结合

## HTTPS的实现过程

浏览器通过域名访问http服务器。在bs的交互中为了防止中间人攻击引入了https加密。

### HTTPS加密

浏览器，服务器，中间传输方式。其中中间传输方式是开放式的，经此传输的数据都可以被截获，篡改。因此，为了实现bs之间的数据传输就需要对数据进行加密。

* 对称加密。首先想到的是对称加密。即通过公用一个密码本，浏览器将数据按照公用的密码本进行加密，然后通过中间传输方式进行传输。然而，由于现实环境中浏览器与服务器是不认识的，因此双方是预先没有公用密码本的。为了传输公用密码本，可以使用非对称加密。
* 非对称加密。非对称加密是加密用的公钥与解密用的私钥不一样。浏览器首先向服务器发起请求，服务器把公钥返回给浏览器，然后浏览器用服务器的公钥对信息加密。然后将密文发送到服务器。服务器拿私钥解密。然而，这依然存在一个问题。即浏览器发起获取公钥的请求被中间人劫持，伪造了一个假的公钥返回给了浏览器。此时如果浏览器受骗，将信息通过伪造的公钥加密，则信息回传给服务器时一定会被破解。为了解决此问题，引入了认证机构。
* 认证机构。常见的认证机构是赛门铁克，Trust Asia等等。通过将网站提交到认证机构，认证机构会给网站颁发一个认证证书。这个证书中包含了网站的唯一性证书及网站数据传输的公钥。浏览器获取到公钥的请求就变成获取证书的请求。获取到请求后，浏览器链接认证中心确认证书的有效性，并提取出相应的公钥。然后，拿着公钥对数据加密传输。服务器用私钥解密。由此完成了https的安全传输。

然而，这中间依然存在一个问题。认证机构的中心化。认证机构过于中心化后，风险大幅度提高。如果被某个政府控制，将随时会引起任意网站不能被访问。为了解决这个问题，引入了区块链。
利用区块链不可更改，删除，透明传输的特点，如果建立一个去中心化的区块链认证机构，就会避免认证中心被政府控制。

1. 建立一个公链。
2. 用户使用私钥在公链上注册自己的网站，将网站域名及https公钥放上面。形成一条交易记录。
3. 浏览器通过网站域名在公链上找到此网站的公钥，并下载。
4. 网站域名与区块链钱包地址使用Namecoin来映射。
5. 发币。此币可以用来支付注册网站的费用。获取网站的公钥信息是否需要支付费用？如果支付的话浏览器访问势必无法与现有浏览器兼容。如果不需要浏览器支付，而让注册人支付又容易被ddos攻击。